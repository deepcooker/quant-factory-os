type -p curl >/dev/null || (sudo apt update && sudo apt install -y curl)
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg \
  | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
sudo chmod go+r /usr/share/keyrings/githubcli-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" \
  | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null
sudo apt update
sudo apt install -y gh
gh --version



((venv) ) (base) root@autodl-container-1a4d48a0d9-a416943c:~/quant-factory-os# gh auth login -h github.com -p https
? Authenticate Git with your GitHub credentials? Yes
? How would you like to authenticate GitHub CLI? Login with a web browser

! First copy your one-time code: A26D-2ABB


export http_proxy=http://127.0.0.1:7890
export https_proxy=http://127.0.0.1:7890
export HTTP_PROXY=$http_proxy
export HTTPS_PROXY=$https_proxy

下一步：新增 tools/doctor.sh（一键自检环境）

它做的事很简单但非常值钱：以后你/AI 每次接手项目，先跑它，马上知道“缺什么”。

它会检查：

当前是否在 git 仓库

远端是否是你这个 repo

gh 是否安装 & 是否已登录

GitHub Actions CI 文件是否存在（.github/workflows/ci.yml）

pytest 是否能跑（有就跑，没就提示）

python 版本（提示你本地 3.12，CI 3.11 也没问题）


codex auth login --device-auth
curl -x http://127.0.0.1:7890 http://registry.npmjs.org/
npm install -g @openai/codex --proxy http://127.0.0.1:7890




╭─────────────────────────────────────────────╮
│ >_ OpenAI Codex (v0.94.0)                   │
│                                             │
│ model:     gpt-5.2-codex   /model to change │
│ directory: ~/quant-factory-os               │
╰─────────────────────────────────────────────╯

  To get started, describe a task or try one of these commands:

  /init - create an AGENTS.md file with instructions for Codex
  /status - show current session configuration
  /permissions - choose what Codex is allowed to do
  /model - choose what model and reasoning effort to use
  /review - review any changes and find issues

 
› Find and fix a bug in @filename
 
  ? for shortcuts            
  
  
  
  export HTTP_PROXY="http://127.0.0.1:7890"
export HTTPS_PROXY="http://127.0.0.1:7890"
export NO_PROXY="127.0.0.1,localhost"
